<html xmlns:layout="http://www.w3.org/1999/xhtml"  layout:decorate="~{layout.html}">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>GeoDiff | Comparing Surface</title>
<!--    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>-->
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
    <link rel="stylesheet" href="https://openlayers.org/en/v5.3.0/css/ol.css" type="text/css">
    <script>
      document.addEventListener('DOMContentLoaded', function(event) {
          var Map = ol.Map;   //import Map from 'ol/Map.js';
          var View = ol.View; //import View from 'ol/View.js';
          var Draw = ol.interaction.Draw; //import Draw from 'ol/interaction/Draw.js';
          var TileLayer = ol.layer.Tile; //import {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer.js';
          var ImageLayer = ol.layer.Image;
          var VectorLayer = ol.layer.Vector; //import {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer.js';
          var OSM = ol.source.OSM; //import {OSM, Vector as VectorSource} from 'ol/source.js';
          var VectorSource = ol.source.Vector; //import {OSM, Vector as VectorSource} from 'ol/source.js';
          var Static = ol.source.ImageStatic;

          var raster = new TileLayer({
            source: new OSM()
          });

          var source = new VectorSource({wrapX: false});


          var imageExtent = [-841259.17, 6405988.47, 404314.67, 8733289.17];

          var map = new Map({
            layers: [
              new TileLayer({
                source: new OSM()
              }),
              new ImageLayer({
                opacity: 0.75,
                source: new Static({
                  url: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/' +
                         'British_National_Grid.svg/2000px-British_National_Grid.svg.png',
                  crossOrigin: '',
                  projection: 'EPSG:3857',
                  imageExtent: imageExtent
                })
              })
            ],
            target: 'map',
            view: new View({
              center: [-352221.88, 7267785.55],
              projection: 'EPSG:3857',
              zoom: 4
            })
          });

          var typeSelect = document.getElementById('type');

          var draw; // global so we can remove it later
          function addInteraction() {
            var value = typeSelect.value;
            if (value !== 'None') {
              draw = new Draw({
                source: source,
                type: typeSelect.value
              });
              map.addInteraction(draw);
            }
          }


          /**
           * Handle change event.
           */
          typeSelect.onchange = function() {
            map.removeInteraction(draw);
            addInteraction();
          };

          addInteraction();
      });
    </script>
</head>
<body>
<section class="result-container rounded" layout:fragment="content">
    <div>
        <div id="map" class="map rounded"></div>
        <div class="box rounded">
            <form class="form-inline">
                <label>Geometry type &nbsp;</label>
                <select id="type">
                    <option value="Polygon">Polygon</option>
                    <option value="Circle">Circle</option>
                    <option value="None">None</option>
                </select>
            </form>
            <p>Select a geometry type from the dropdown above to start drawing. To finish drawing, click the last point. To activate freehand drawing for lines, polygons, and circles, hold the <code>Shift</code> key.</p>
        </div>

    </div>
    <div class="menu-options rounded">
        <p>Date Intervals:</p>
        <div>
            <label for="begin-date" value="2017-01-01">Begin: </label>
            <input id="begin-date" type="date">
        </div>
        <div>
            <label for="end-date">End: </label>
            <input id="end-date" type="date" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}">
        </div>
        <p>Filter Options:</p>
        <ul>
            <li>
                <input type="checkbox" id="deforestation-opt" value="deforestation">
                <label for="deforestation-opt">Deforestation</label>
            </li>
            <li>
                <input type="checkbox" id="urbanization-opt" value="urbanization">
                <label for="urbanization-opt">Urbanization</label>
            </li>
            <li>
                <input type="checkbox" id="drought-opt" value="drought">
                <label for="drought-opt">Drought</label>
            </li>
        </ul>
        <a th:href="@{/geo/new-map-example}" class="button">Retrieve Data</a>
    </div>
</section>
</body>
</html>
